<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>DTMF with Javascript minimal example</title>
</head>
<body>
<input type="text" id="input" style="width:80em" placeholder="+86 139">
<script type="text/javascript">

var ctx = new AudioContext();

function play_freq(s){

    let g = ctx.createGain();
    g.gain.value = 0.25;
    let f = ctx.createBiquadFilter();
    f.type = "lowpass"; f.frequency = 8000;
    g.connect(f); f.connect(ctx.destination);

  [].forEach.call(arguments, freq=>{
    let osc = ctx.createOscillator();
    osc.frequency.value = freq;
    osc.connect(g);  // or ctx.destination
    osc.start(0); osc.stop(ctx.currentTime + 0.2);
 })
}

// dial tone
input.onfocus = ev=>play_freq(350, 440)

input.onkeydown = ev => {
  let fs = {
    "1": [ 1209, 697 ],
    "2": [ 1336, 697 ],
    "3": [ 1477, 697 ],
    "4": [ 1209, 770 ],
    "5": [ 1336, 770 ],
    "6": [ 1477, 770 ],
    "7": [ 1209, 852 ],
    "8": [ 1336, 852 ],
    "9": [ 1477, 852 ],
    "*": [ 1209, 941 ],
    "0": [ 1336, 941 ],
    "#": [ 1477, 941 ],
  }[String.fromCharCode(ev.keyCode)] || [
    [ 1633, 697 ],  // a
    [ 1633, 770 ],  // b
    [ 1633, 852 ],  // c
    [ 1633, 941 ],  // d
  ][ev.keyCode % 4]
  play_freq.apply(this, fs)
}
</script>
</body>
</html>