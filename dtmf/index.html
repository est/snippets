<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title></title>
</head>
<body>


<div id="dtmf">
    <h2>Sent tones</h2>
    <div id="dtmfStatus"></div>
    <input type="text" disabled style="width: 80%" id="sentTones" />
    <audio autoplay="autoplay" id="out"></audio>
</div>

<script type="text/javascript">
var pc, sender;
dtmf.onclick = async function(){
  var st = await navigator.mediaDevices.getUserMedia({audio: true, video: false});
  pc = new RTCPeerConnection({sdpSemantics:'unified-plan'});
  st.getTracks().forEach(track => pc.addTrack(track, st));
  // var sender = pc.addTransceiver('audio').sender.dtmf
  sender = pc.getSenders().find(s=>s.track&&s.track.kind === 'audio')
  // sender.canInsertDTMF = true
  out.srcObject = sender.outputStream;
  out.play();

  sender.ontonechange = function(e) {
    console.log(JSON.stringify(e));
  }
  sender.dtmf.insertDTMF("2145551212,1");
};

</script>
</body>
</html>